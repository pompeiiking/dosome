# 项目对话深度总结（AI预设提示词）

---

## 项目背景总结

- **项目类型**：微信小程序，名称为"Ciallo旅行推荐助手"，主打分步表单收集用户旅行需求，生成个性化推荐。
- **前端结构**：主页面为`pages/index/index`，包含兴趣多选、活动多选（次级多选）、分步表单、数据校验、与后端交互等。
- **组件化**：兴趣选择、活动选择均为自定义组件，样式和交互高度自定义，注重用户体验和视觉一致性。

---

## 用户的项目处理方式

- **极度重视交互体验**：对多选卡片的选中/未选中状态、顺序徽章、样式一致性有极高要求，强调"点击即高亮，未点即灰"。
- **调试优先**：习惯在前端UI和console中同步输出调试信息，实时观察数据流、判定逻辑和UI渲染是否一致。
- **数据流敏感**：对小程序数据流、setData机制、深层对象diff、类型变化等有较强敏感性，能快速定位数据与UI不同步的根因。
- **问题定位细致**：善于通过调试输出、console.log、wxml调试信息等手段，精准定位问题发生的具体环节。

---

## 对问题的分析方式

- **链式排查**：每次遇到问题，先从UI现象出发，结合console输出，逐步排查数据流、事件流、类型变化、wxml判定条件、样式文件等各环节。
- **类型安全优先**：对数组/字符串类型转换、对象深拷贝、setData副作用等问题高度警觉，习惯在关键赋值处加类型断言和修正。
- **逻辑分离**：善于将"行为判定"与"样式判定"分离，最终采用英文单词（如'selected'/'unselected'）作为唯一判据，彻底绕开小程序的类型陷阱。
- **冗余剔除**：调试阶段会大量输出信息，问题解决后会主动清理冗余逻辑和调试代码，保持代码简洁。

---

## 用户的习惯性意图

- **追求100%可控的UI反馈**，不容忍任何"偶发"或"缓存"导致的UI与数据不同步。
- **希望AI能主动发现并规避小程序平台的已知陷阱**（如setData深层diff、wxml类型限制、对象属性传递等）。
- **希望AI能给出"可落地、可验证"的修复建议**，并能直接给出可用的代码片段。
- **希望AI能在每一步都进行深度思考和链式推理，而不是表面修补。**

---

## 对错误的解决思路

- **先调试、再修正、后精简**：先用调试信息定位问题，修正后再清理冗余。
- **类型问题优先彻底规避**：一旦发现类型不一致，优先用"标志位"或"对象属性"替代数组/字符串判定。
- **样式与行为强绑定**：所有UI高亮、顺序徽章等都与唯一的"selected"状态强绑定，保证行为和视觉100%一致。
- **兼容后端**：即使前端用新判据，也会保留selected_tags数组，兼容后端接口。

---

## 适合作为AI预设提示词的总结

> 本项目为微信小程序"Ciallo旅行推荐助手"，高度重视多选交互体验和数据流/样式一致性。用户习惯链式排查问题，优先用调试输出定位类型和数据流问题，最终用英文单词（如'selected'/'unselected'）作为唯一判据控制样式和行为，彻底规避小程序setData和wxml类型陷阱。用户希望AI能主动发现平台陷阱，给出可落地的修复建议，并在每一步都进行深度链式推理。调试后会主动清理冗余逻辑，保持代码简洁。所有UI高亮和行为都与唯一的"selected"状态强绑定，兼容后端数据结构。 